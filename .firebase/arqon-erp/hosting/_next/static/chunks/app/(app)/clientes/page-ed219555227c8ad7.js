(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2507],{5728:(e,l,a)=>{"use strict";a.d(l,{j:()=>i,db:()=>d});var s=a(2078),t=a(2553),n=a(9708);let r=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyBn_tEKXbH1MODTU-ZX6wI7H6gcrIib0RM",authDomain:"arqon-erp.firebaseapp.com",projectId:"arqon-erp",storageBucket:"arqon-erp.appspot.com",messagingSenderId:"100563303537",appId:"1:100563303537:web:361ed1c0989e4868c16fd0"}),i=(0,t.xI)(r),d=(0,n.aU)(r)},8312:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>i});var s=a(5155),t=a(2115),n=a(5728),r=a(9708);function i(){let[e,l]=(0,t.useState)([]),[a,i]=(0,t.useState)(""),[d,c]=(0,t.useState)(null),[o,m]=(0,t.useState)(""),[u,x]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[b,j]=(0,t.useState)(""),[N,g]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[w,C]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=(0,r.P)((0,r.rJ)(n.db,"clientes"),(0,r.My)("updatedAt","desc"),(0,r.AB)(300)),a=(0,r.aQ)(e,e=>{l(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[]);let k=(0,t.useMemo)(()=>{let l=a.trim().toLowerCase();return l?e.filter(e=>(e.nombre||"").toLowerCase().includes(l)||(e.cuit||"").toLowerCase().includes(l)||(e.email||"").toLowerCase().includes(l)):e},[e,a]);function S(){c(null),m(""),x(""),p(""),j(""),g(""),v(""),C("")}async function y(e){if(e.preventDefault(),!o.trim())return alert("Complet\xe1 el nombre");let l={nombre:o.trim(),cuit:u.trim()||null,email:h.trim()||null,telefono:b.trim()||null,direccion:N.trim()||null,ciudad:f.trim()||null,provincia:w.trim()||null,updatedAt:(0,r.O5)()};try{d?await (0,r.mZ)((0,r.H9)(n.db,"clientes",d),l):u.trim()?await (0,r.BN)((0,r.H9)(n.db,"clientes",u.replace(/[^\d]/g,"")),l,{merge:!0}):await (0,r.gS)((0,r.rJ)(n.db,"clientes"),l),S()}catch(e){alert(e.message)}}async function I(e){confirm("\xbfEliminar cliente?")&&(await (0,r.kd)((0,r.H9)(n.db,"clientes",e)),d===e&&S())}return(0,s.jsxs)("main",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Clientes"}),(0,s.jsx)("form",{onSubmit:y,className:"bg-white rounded-xl shadow p-4 mb-6",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre / Raz\xf3n Social *"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:o,onChange:e=>m(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"CUIT / DNI"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:u,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:h,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tel\xe9fono"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:b,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Direcci\xf3n"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:N,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ciudad"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:f,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Provincia"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",value:w,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex items-center gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"bg-black text-white rounded-lg px-4 py-2",children:d?"Guardar cambios":"Crear cliente"}),d&&(0,s.jsx)("button",{type:"button",onClick:S,className:"border rounded-lg px-4 py-2",children:"Cancelar edici\xf3n"})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow p-4 mb-3",children:(0,s.jsx)("input",{className:"border rounded-lg p-2 w-full",placeholder:"Buscar nombre, CUIT o email…",value:a,onChange:e=>i(e.target.value)})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow p-4 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-2",children:"Nombre"}),(0,s.jsx)("th",{className:"text-left p-2",children:"CUIT"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Email"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Ciudad"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Provincia"}),(0,s.jsx)("th",{className:"p-2"})]})}),(0,s.jsxs)("tbody",{children:[k.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-2",children:e.nombre}),(0,s.jsx)("td",{className:"p-2",children:e.cuit||"—"}),(0,s.jsx)("td",{className:"p-2",children:e.email||"—"}),(0,s.jsx)("td",{className:"p-2",children:e.telefono||"—"}),(0,s.jsx)("td",{className:"p-2",children:e.ciudad||"—"}),(0,s.jsx)("td",{className:"p-2",children:e.provincia||"—"}),(0,s.jsx)("td",{className:"p-2 text-right",children:(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)("button",{className:"border rounded px-2 py-1",onClick:()=>{c(e.id),m(e.nombre||""),x(e.cuit||""),p(e.email||""),j(e.telefono||""),g(e.direccion||""),v(e.ciudad||""),C(e.provincia||""),window.scrollTo({top:0,behavior:"smooth"})},children:"Editar"}),(0,s.jsx)("button",{className:"text-red-600",onClick:()=>I(e.id),children:"Eliminar"})]})})]},e.id)),0===k.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:7,children:"Sin clientes"})})]})]})})]})}},9194:(e,l,a)=>{Promise.resolve().then(a.bind(a,8312))}},e=>{e.O(0,[9135,3965,7240,8441,1255,7358],()=>e(e.s=9194)),_N_E=e.O()}]);