(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3432],{5715:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var t=s(5155),l=s(2115),r=s(5728),i=s(9708);function c(){let[e,a]=(0,l.useState)([]),[s,c]=(0,l.useState)("Lista manual"),[n,d]=(0,l.useState)(null),[o,m]=(0,l.useState)("");async function x(){let e=s.trim()||"Lista manual";await (0,i.gS)((0,i.rJ)(r.db,"listas"),{nombre:e,archivo:null,sheet:null,total_items:0,activa:!1,createdAt:(0,i.O5)()}),c("Lista manual")}async function h(){if(!n)return;let e=o.trim();e&&(await (0,i.mZ)((0,i.H9)(r.db,"listas",n),{nombre:e}),d(null),m(""))}async function p(e){let a=await (0,i.GG)((0,i.rJ)(r.db,"listas")),s=(0,i.wP)(r.db);a.forEach(a=>{let t=a.id===e;s.update((0,i.H9)(r.db,"listas",a.id),{activa:t})}),await s.commit()}return(0,l.useEffect)(()=>{let e=(0,i.P)((0,i.rJ)(r.db,"listas"),(0,i.My)("createdAt","desc")),s=(0,i.aQ)(e,e=>{a(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>s()},[]),(0,t.jsxs)("main",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Precios (Listas)"}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[(0,t.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre de la lista"}),(0,t.jsx)("input",{className:"border rounded-lg p-2 w-full",value:s,onChange:e=>c(e.target.value)})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("button",{onClick:x,className:"bg-black text-white rounded-lg px-4 py-2",children:"Crear lista vac\xeda"}),(0,t.jsx)("a",{href:"/importar/precios",className:"ml-2 border rounded-lg px-4 py-2 inline-block",children:"+ Importar desde Excel"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Una lista vac\xeda te permite luego asignar productos manualmente (por ahora la edici\xf3n de precios es en “Productos / Servicios”)."})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow p-4 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-2",children:"Nombre"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Archivo"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Hoja"}),(0,t.jsx)("th",{className:"text-right p-2",children:"\xcdtems"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Activa"}),(0,t.jsx)("th",{className:"p-2"})]})}),(0,t.jsxs)("tbody",{children:[e.map(e=>{var a;return(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-2",children:n===e.id?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{className:"border rounded-lg p-1",value:o,onChange:e=>m(e.target.value)}),(0,t.jsx)("button",{className:"border rounded px-2",onClick:h,children:"OK"}),(0,t.jsx)("button",{className:"text-gray-600",onClick:()=>{d(null),m("")},children:"Cancelar"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.nombre}),(0,t.jsx)("button",{className:"text-gray-600 underline",onClick:()=>{d(e.id),m(e.nombre)},children:"Renombrar"})]})}),(0,t.jsx)("td",{className:"p-2",children:e.archivo||"—"}),(0,t.jsx)("td",{className:"p-2",children:e.sheet||"—"}),(0,t.jsx)("td",{className:"p-2 text-right",children:null!=(a=e.total_items)?a:0}),(0,t.jsx)("td",{className:"p-2",children:e.activa?"S\xed":"No"}),(0,t.jsx)("td",{className:"p-2 text-right",children:!e.activa&&(0,t.jsx)("button",{className:"border rounded px-2 py-1",onClick:()=>p(e.id),children:"Activar"})})]},e.id)}),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:6,children:"Sin listas"})})]})]})})]})}},5728:(e,a,s)=>{"use strict";s.d(a,{j:()=>c,db:()=>n});var t=s(2078),l=s(2553),r=s(9708);let i=(0,t.Dk)().length?(0,t.Sx)():(0,t.Wp)({apiKey:"AIzaSyBn_tEKXbH1MODTU-ZX6wI7H6gcrIib0RM",authDomain:"arqon-erp.firebaseapp.com",projectId:"arqon-erp",storageBucket:"arqon-erp.appspot.com",messagingSenderId:"100563303537",appId:"1:100563303537:web:361ed1c0989e4868c16fd0"}),c=(0,l.xI)(i),n=(0,r.aU)(i)},7726:(e,a,s)=>{Promise.resolve().then(s.bind(s,5715))}},e=>{e.O(0,[9135,3965,7240,8441,1255,7358],()=>e(e.s=7726)),_N_E=e.O()}]);